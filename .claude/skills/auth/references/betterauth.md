# BetterAuth 詳細リファレンス

## 目次

1. [概要](#概要)
2. [採用が推奨されるケース](#採用が推奨されるケース)
3. [Vercelとの相性](#vercelとの相性)
4. [セッション管理](#セッション管理)
5. [OAuth拡張](#oauth拡張)
6. [Docker環境での注意点](#docker環境での注意点)

---

## 概要

BetterAuthは軽量でモダンな認証ライブラリ。Next.js App Routerとの親和性が高く、Vercel環境でのデプロイに最適化されている。

**特徴:**
- 軽量・シンプルな設計
- Next.js App Router対応
- Edge Runtime対応
- 柔軟なセッション管理
- OAuth プロバイダの追加が容易

## 採用が推奨されるケース

| 条件 | 推奨度 |
|------|--------|
| Vercel + 軽量構成 | ◎ 強く推奨 |
| 将来OAuth拡張予定 | ◎ 強く推奨 |
| DBは別サービス（PlanetScale, Neonなど） | ○ 推奨 |
| Supabase DB未使用 | ○ 推奨 |
| 認証ロジックの完全なコントロールが必要 | ○ 推奨 |

## Vercelとの相性

**良い点:**
- Edge Runtimeで動作可能
- サーバーレス環境に最適化
- コールドスタートが軽い

**注意点:**
- DB接続はコネクションプーリングを検討
- 環境変数の設定が必要

## セッション管理

**推奨方式:** JWTベースのセッション

- アクセストークン: 短い有効期限（15分程度）
- リフレッシュトークン: 長い有効期限（7日程度）
- Cookieに保存（httpOnly, secure, sameSite）

## OAuth拡張

追加が容易なプロバイダ:
- Google
- GitHub
- Discord
- その他OIDC準拠プロバイダ

## Docker環境での注意点

**開発環境:**
- 環境変数でAuthのURLを設定
- ホットリロード対応

**本番環境:**
- HTTPS必須
- Cookie設定の確認
- CORS設定の確認
